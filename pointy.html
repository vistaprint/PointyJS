<!doctype html>
<!--[if !IE]>      <html class="no-js non-ie" lang="en-US"> <![endif]-->
<!--[if IE 7 ]>    <html class="no-js ie7" lang="en-US"> <![endif]-->
<!--[if IE 8 ]>    <html class="no-js ie8" lang="en-US"> <![endif]-->
<!--[if IE 9 ]>    <html class="no-js ie9" lang="en-US"> <![endif]-->
<!--[if gt IE 9]><!--> <html class="no-js" lang="en-US"> <!--<![endif]-->
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <!--[if lt IE 9]> <script src="javascripts/html5shiv.js"></script> <![endif]-->

  <link rel='stylesheet' id='responsive-style-css' href='stylesheets/style.css' type='text/css' />
  <link rel='stylesheet' id='responsive-media-queries-css'  href='stylesheets/media-queries.css' type='text/css'/>
  <link rel="stylesheet" href="stylesheets/syntax-highlighting.css"/>

  <script type='text/javascript' src='javascripts/jquery.js'></script>
  <script type='text/javascript' src='javascripts/jquery-migrate.min.js'></script>
  <script type='text/javascript' src='javascripts/responsive-modernizr.js'></script>
  <script type="text/javascript" src="javascripts/script.js"></script>
  <script type="text/javascript" src="javascripts/toc.js"></script>

  <title>pointy.js</title>

  <meta name="description" content="Pointy JS">
  <meta name="viewport" content="width=device-width,initial-scale=1">

</head>

<body class="home blog front-page">
                 
  <div id="container" class="hfeed">
           
      <div id="header">
                 
        <div id="logo" class="pointy-logo">
            <a href="./">pointy.js</a>
        </div>
            
        <div class="main-nav">
          <ul class="menu">
            <li class="current_page_item"><a href="./" title="Home">Home</a></li>
            <li class="page_item"><a href="pointyjs.zip">Download</a></li>
            <li class="page_item"><a href="#" onclick="return false;">Documentation</a>
              <ul class="children">
                <li class="page_item"><a href='pointy.html'>pointy.js</a></li>
                <li class="page_item"><a href='pointy.gestures.html'>pointy.gestures.js</a></li>
              </ul>
            </li>
          </ul>
      </div>                
                   
    </div>
          
    <div id="wrapper" class="clearfix">

      <div class="grid col-940">
  <div class="widget-wrapper markdown-body">

     
    <div class="source-links">
        <a href="https://github.com/vistaprint/PointyJS/blob/master/js/pointy.js.js" class="github-source-link" target="_blank">View on github</a> |
        <a href="docco/pointy.js.html" class="docco-link">Annotated source</a>
    </div>
    

    <h2 id='pointyjs'>pointy.js</h2>

<p>pointy.js is a polyfill for the new <a href='http://www.w3.org/TR/pointerevents/'>pointer events api</a>. It is an abstraction on top of touch and mouse events which mimics native pointer events. This is particularly useful because it will work across all devices which support either the Apple-style touch events (i.e. iOS, Android, Chrome OS) and those that support pointer events (i.e. Windows 8 and Windows Phone 7).</p>

<p>pointy.js allows you to attach only to pointer events and let it deal with support all the other types of events. You no longer need to handle mouse and touch events separately.</p>

<h3 id='inclusion'>Inclusion</h3>

<p>Include pointy.js in your JavaScript bundle or add it to your HTML page:</p>
<div class='highlight'><pre><code class='html'><span class='c'>&lt;!-- pointy.js requires jQuery --&gt;</span>
<span class='nt'>&lt;script </span><span class='na'>type=</span><span class='s'>&quot;text/javascript&quot;</span> <span class='na'>src=</span><span class='s'>&quot;/path/to/pointy.js&quot;</span><span class='nt'>&gt;&lt;/script&gt;</span>
</code></pre></div>
<p>Additionally, <a href='pointy.gestures.html'>pointy.gestures</a> can be included, which supports a number of high-level events built on top of pointer events:</p>
<div class='highlight'><pre><code class='html'><span class='nt'>&lt;script </span><span class='na'>type=</span><span class='s'>&quot;text/javascript&quot;</span> <span class='na'>src=</span><span class='s'>&quot;/path/to/pointy.gestures.js&quot;</span><span class='nt'>&gt;&lt;/script&gt;</span>
</code></pre></div>
<p>The script must me loaded prior to binding to any pointer events of any element on the page.</p>

<h3 id='events'>Events</h3>

<h5 id='pointerdown'>pointerdown</h5>

<p>This event is fired when a pointer enters the active state, and abstracts the <code>mousedown</code> and <code>touchstart</code> events.</p>

<p>For mouse devices, this occurs when the device goes from no buttons depressed to at least one button depressed. Subsequent button pressing on mouse devices only trigger a <code>pointermove</code> event.</p>

<p>For touch and pen devices, this event occurs when an initial touch occurs.</p>

<h5 id='pointerup'>pointerup</h5>

<p>This event is fired when a pointer leaves the active state, and abstracts the <code>mouseup</code> and <code>touchend</code> events. For mouse devices, this is when the device goes from at least one button depressed to no buttons depressed. For touch and pen devices, this occurs when touch contact is removed.</p>

<h5 id='pointercancel'>pointercancel</h5>

<p>This event is fired when a pointer is determined to be unlikely to produce further events. For example, on a mobile device, this occurs when the user starts to touch and then proceeds to zoom or pan the page. Other times this may be triggered is when the device&#8217;s screen orientation is changed while a pointer is active, or if the user starts using more inputs than the device supports (such as on five-finger contact screens and the user attempts to use more than five fingers).</p>

<p>While pointy.js abstracts <code>touchcancel</code> events, there is no mouse equivalent. pointy.js does not attempt to detect situations that may cause a <code>pointercancel</code> event directly. User agents are responsible for determining when it thinks it should trigger cancel events, as such, each device may trigger cancel events for different reasons.</p>

<h5 id='pointermove'>pointermove</h5>

<p>This event abstracts the <code>mousemove</code> and <code>touchmove</code> events, and is fired when a pointer changes coordinates, button state, pressure, tilt, or contact geometry.</p>

<h5 id='pointerover'>pointerover</h5>

<p>This event abstracts <code>mouseover</code>, and is fired when a pointing device is moved into the hit test boundaries of an element.</p>

<p>Note: There is no touch equivalent for this event.</p>

<h5 id='pointerout'>pointerout</h5>

<p>This event abstracts <code>mouseout</code>, and is fired when a pointing device is moved out of the hit test boundaries of an element.</p>

<p>Note: There is no touch equivalent for this event.</p>

<h5 id='pointerenter'>pointerenter</h5>

<p>This event is fired when a pointing device hits the boundaries of an element or one of its descendants. This is similar to <code>pointerover</code>, except that <code>pointerover</code> does not consider descendants.</p>

<p>pointy.js abstracts <code>MSPointerOver</code> for IE10, otherwise it uses jQuery&#8217;s <code>mouseenter</code> polyfill.</p>

<p>There is no touch equivalent to this event.</p>

<h5 id='pointerleave'>pointerleave</h5>

<p>This event is fired when a pointing device leaves the hit test boundaries of an element and all of its descendants. This is similar to <code>pointerout</code>, except that <code>pointerout</code> does not consider descendants.</p>

<p>pointy.js abstracts <code>MSPointerOut</code> for IE10, otherwise it uses jQuery&#8217;s <code>mouseleave</code> polyfill</p>

<p>There is no touch equivalent to this event.</p>

<h3 id='the__css_property'>The <code>touch-action</code> CSS property</h3>

<p>pointy.js does not implement a polyfill for the <code>touch-action</code> CSS property. We recommend setting <code>touch-action</code> to <code>none</code> for all elements you indent to attach pointer events to through pointy.js. This ensures you receive the same events across devices that support native pointer events and those that don&#8217;t natively.</p>

<h3 id='event_object'>Event object</h3>

<p>The <code>jQuery.Event</code> object passed is modified by pointy.js to standardize it between all the user input APIs (mouse, touch and pointer events).</p>

<h4 id='pointer_type'>Pointer Type</h4>

<p><code>event.pointerType</code> will be: <code>touch</code>, <code>pen</code>, or <code>mouse</code>.</p>

<h4 id='buttons'>Buttons</h4>

<p><code>event.buttons</code> is a bitmask of buttons currently depressed. <a href='http://www.w3.org/TR/pointerevents/#chorded-button-interactions'>See spec</a>.</p>

<p>Values:</p>

<ul>
<li><code>0</code> no buttons are pressed.</li>

<li><code>1</code> means either touch contact (finger), pen or the left-mouse button is depressed.</li>

<li><code>2</code> means the right-mouse button is depressed.</li>

<li><code>4</code> means the middle-mouse button is depressed.</li>

<li><code>8</code> means the x1 (back mouse button) is depressed.</li>

<li><code>18</code> means the x1 (forward mouse button) is depressed.</li>

<li><code>32</code> means the eraser button on a pen is depressed.</li>
</ul>

<p>The bitmask of these identifies which buttons are pressed. For example: if both the left and right mouse buttons are depressed, <code>event.buttons</code> will be 3.</p>

<h4 id='pointer_id'>Pointer ID</h4>

<p><code>event.pointerId</code> is a standardized identifier to keep track of various pointers.</p>

<p><code>pointerId</code> is always 1 for a mouse. It however provides a unique identifer for touch-driven events, which you can compare across the <code>pointerdown</code>, <code>pointermove</code> and <code>pointerend</code> events to keep track of separate fingers.</p>

<h4 id='pressure_width_height'>Pressure, width, height</h4>

<p><code>event.pressure</code> is a normalized pressure of the pointer represented as a float in the range of <span>0,1</span>. When the hardware does not support pressure detection, the value will be 0.5 when any pointer is active (i.e. user is currently touching or a button is down) and 0 otherwise.</p>

<p><code>event.width</code> and <code>event.height</code> represent the contact geometry for a pointer. When the hardware cannot provide this, the value will be 0.</p>

<h4 id='preventing_click_events'>Preventing click events</h4>

<p><code>event.preventClick()</code> is a utility to stop the native click event that follows a pointer event.</p>

<p>This utility especially useful when attempting to prevent navigation from within a pointer event. An example of this:</p>
<div class='highlight'><pre><code class='javascript'><span class='nx'>$</span><span class='p'>(</span><span class='s1'>&#39;a&#39;</span><span class='p'>).</span><span class='nx'>on</span><span class='p'>(</span><span class='s1'>&#39;press&#39;</span><span class='p'>,</span> <span class='kd'>function</span> <span class='p'>(</span><span class='nx'>e</span><span class='p'>)</span> <span class='p'>{</span>
	<span class='k'>if</span> <span class='p'>(</span><span class='nx'>e</span><span class='p'>.</span><span class='nx'>pointerType</span> <span class='o'>===</span> <span class='s1'>&#39;touch&#39;</span><span class='p'>)</span> <span class='p'>{</span>
		<span class='nx'>e</span><span class='p'>.</span><span class='nx'>preventClick</span><span class='p'>();</span>
		<span class='nx'>toggleDropDownMenu</span><span class='p'>();</span>
	<span class='p'>}</span>
<span class='p'>});</span>
</code></pre></div>
<p>You can check whether <code>preventClick()</code> has been called on a click event using <code>event.isClickPrevented()</code>. These utilities can be used from <code>pointerdown</code>, <code>pointerup</code>, <code>pointermove</code>, <code>press</code>, <code>presshold</code>, <code>swipe</code>, <code>swipeleft</code>, and <code>swiperight</code>.</p>

<p>Note: The click event cannot always be prevented completely. In cases where pointy.js cannot prevent it from being triggered, it will call <code>event.preventDefault()</code> and <code>event.stopPropagation()</code> on the event.</p>

<h3 id='examples'>Examples</h3>
<div class='highlight'><pre><code class='javascript'><span class='nx'>$</span><span class='p'>(</span><span class='s1'>&#39;a&#39;</span><span class='p'>).</span><span class='nx'>on</span><span class='p'>(</span><span class='s1'>&#39;pointerdown&#39;</span><span class='p'>,</span> <span class='kd'>function</span> <span class='p'>(</span><span class='nx'>e</span><span class='p'>)</span> <span class='p'>{</span>

	<span class='c1'>// Getting coordinates</span>
	<span class='kd'>var</span> <span class='nx'>top</span> <span class='o'>=</span> <span class='nx'>e</span><span class='p'>.</span><span class='nx'>clientX</span><span class='p'>;</span>
	<span class='kd'>var</span> <span class='nx'>left</span> <span class='o'>=</span> <span class='nx'>e</span><span class='p'>.</span><span class='nx'>clientY</span><span class='p'>;</span>

	<span class='c1'>// Detecting the underlying event</span>
	<span class='c1'>// This could be a mousedown, touchstart, or actual pointerdown event.</span>
	<span class='kd'>var</span> <span class='nx'>underlyingEvent</span> <span class='o'>=</span> <span class='nx'>e</span><span class='p'>.</span><span class='nx'>originalEvent</span><span class='p'>;</span> 

	<span class='c1'>// continue on your way...</span>
<span class='p'>});</span>
</code></pre></div><div class='highlight'><pre><code class='javascript'><span class='c1'>// opening a context menu</span>
<span class='nx'>$</span><span class='p'>(</span><span class='s1'>&#39;a&#39;</span><span class='p'>).</span><span class='nx'>on</span><span class='p'>({</span>
	<span class='c1'>// if they either press down for awhile; like people do on mobile devices.</span>
	<span class='s1'>&#39;presshold&#39;</span><span class='o'>:</span> <span class='nx'>openMenu</span><span class='p'>,</span>
	<span class='c1'>// or we can get the contextmenu event, such as from right clicking</span>
	<span class='s1'>&#39;contextmenu&#39;</span><span class='o'>:</span> <span class='nx'>openMenu</span>
<span class='p'>});</span>
</code></pre></div>
<p>For more examples, see <a href='https://github.com/vistaprint/SkinnyJS'>Skinny.js</a> which uses pointy.js within many of its plugins.</p>
  </div>
</div>
 

    </div><!-- end of #wrapper -->
  </div><!-- end of #container -->

  <div id="footer" class="clearfix">
    
      <div id="footer-wrapper">
      
          <div class="grid col-940">
          
            <div class="grid col-540"></div><!-- end of col-540 -->
           
            <div class="grid col-380 fit">
              <ul class="social-icons"></ul><!-- end of .social-icons -->         
            </div><!-- end of col-380 fit -->
           
          </div><!-- end of col-940 -->
                               
          <div class="grid col-300 copyright">
              &copy; 2013 <a href="http://www.vistaprint.com/" title="Vistaprint | Business Cards, Websites, Postcards, T-shirts And More">Vistaprint</a>
          </div><!-- end of .copyright -->
          
          <div class="grid col-300 fit powered">
          </div><!-- end .powered -->
          
      </div><!-- end #footer-wrapper -->
      
  </div><!-- end #footer -->

  <script type='text/javascript' src='javascripts/responsive.js'></script>
</body>
</html>
